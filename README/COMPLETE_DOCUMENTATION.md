# üìö Morphik - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã
*–ê–∫—Ç—É–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è: 0.4.12 | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: 02.09.2025*

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
- [–û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã](#–æ–±–∑–æ—Ä-—Å–∏—Å—Ç–µ–º—ã)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã](#–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã](#–∑–∞–ø—É—Å–∫-—Å–∏—Å—Ç–µ–º—ã)
- [–î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º](#–¥–æ—Å—Ç—É–ø-–∫-—Å–µ—Ä–≤–∏—Å–∞–º)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [API Endpoints](#api-endpoints)
- [–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º](#—Ä–µ—à–µ–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º)

---

## üéØ –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

Morphik - —ç—Ç–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å AI, –∏—Å–ø–æ–ª—å–∑—É—é—â–∞—è –≥–∏–±—Ä–∏–¥–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –∏ —É–¥–∞–ª–µ–Ω–Ω—ã–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- üìÑ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**: PDF, DOCX, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –¥—Ä—É–≥–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã
- üîç **–ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫**: –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É –∏ –≤–∏–∑—É–∞–ª—å–Ω–æ–º—É —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É —Å ColPali
- üí¨ **AI —á–∞—Ç**: –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ-–∑–∞–≤–∏—Å–∏–º—ã–µ –¥–∏–∞–ª–æ–≥–∏ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
- üï∏Ô∏è **–ì—Ä–∞—Ñ—ã –∑–Ω–∞–Ω–∏–π**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π –∏ —Å–≤—è–∑–µ–π
- üè† **–õ–æ–∫–∞–ª—å–Ω—ã–µ LLM**: –†–∞–±–æ—Ç–∞ –æ—Ñ–ª–∞–π–Ω —Å Ollama
- üöÄ **GPU –æ–±—Ä–∞–±–æ—Ç–∫–∞**: ColPali serverless GPU –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ PDF
- üîí **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å SHA256+salt
- üí∞ **–≠–∫–æ–Ω–æ–º–∏—á–Ω–æ—Å—Ç—å**: Pay-per-use GPU –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (02.09.2025)
- **API –∏ Worker**: –ó–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ Docker
- **UI**: –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ Docker (production build)
- **–¢—è–∂–µ–ª—ã–µ —Å–µ—Ä–≤–∏—Å—ã**: –ù–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ 135.181.106.12
- **ColPali GPU**: Serverless –Ω–∞ Modal.com –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **MinIO Storage**: S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–ø–æ—Ä—Ç 32000)
- **–ï–¥–∏–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**: demotest (ID: 8)

### –°—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Frontend UI   ‚îÇ    ‚îÇ   Local API     ‚îÇ    ‚îÇ  Modal.com      ‚îÇ
‚îÇ  (localhost:    ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  (localhost:    ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   (ColPali)     ‚îÇ
‚îÇ     3000)       ‚îÇ    ‚îÇ     8000)       ‚îÇ    ‚îÇ                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                ‚îÇ                       ‚îÇ
                                ‚ñº                       ‚ñº
                       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                       ‚îÇ   Hetzner       ‚îÇ    ‚îÇ   Auto-scaling  ‚îÇ
                       ‚îÇ (135.181.106.12)‚îÇ    ‚îÇ   (idle ‚Üí off)  ‚îÇ
                       ‚îÇ                 ‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ ‚Ä¢ PostgreSQL    ‚îÇ
                       ‚îÇ ‚Ä¢ Redis         ‚îÇ
                       ‚îÇ ‚Ä¢ Ollama        ‚îÇ
                       ‚îÇ ‚Ä¢ MinIO         ‚îÇ
                       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ | –ü–æ—Ä—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|--------------|------|----------|
| UI | –õ–æ–∫–∞–ª—å–Ω–æ (Docker) | 3000 | Next.js production build |
| API | –õ–æ–∫–∞–ª—å–Ω–æ (Docker) | 8000 | FastAPI —Å–µ—Ä–≤–µ—Ä |
| Worker | –õ–æ–∫–∞–ª—å–Ω–æ (Docker) | - | Arq worker –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á |
| PostgreSQL | Hetzner | 5432 | –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å pgvector |
| Redis | Hetzner | 6379 | –ö–µ—à –∏ –æ—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á |
| Ollama | Hetzner | 11434 | LLM –º–æ–¥–µ–ª–∏ (llama3.2:3b) |
| MinIO | Hetzner | 32000 | S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ |
| ColPali | Modal.com | HTTPS | –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (serverless) |

---

## üîß –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### API (morphik_local-morphik)
- **–û–±—Ä–∞–∑**: 3GB
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**: FastAPI, Python 3.11, UV
- **–§—É–Ω–∫—Ü–∏–∏**:
  - REST API endpoints
  - JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
  - CORS –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LLM —á–µ—Ä–µ–∑ LiteLLM

### Worker (morphik_local-worker)
- **–û–±—Ä–∞–∑**: 3GB
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**: Arq, Redis
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
  - –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –≤ –≤–µ–∫—Ç–æ—Ä–Ω—É—é –ë–î
  - –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏

### UI (morphik_local-ui)
- **–û–±—Ä–∞–∑**: 201MB
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**: Next.js 14, React, TypeScript
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –ß–∞—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
  - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–æ–≤
  - PDF viewer

### ColPali (Modal.com GPU)
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**: vidore/colpali
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ PDF
  - –í–∏–∑—É–∞–ª—å–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü, –≥—Ä–∞—Ñ–∏–∫–æ–≤
  - –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è –ø–æ–∏—Å–∫–∞
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### MinIO Storage
- **Endpoint**: http://135.181.106.12:32000
- **Bucket**: morphik-storage
- **–§—É–Ω–∫—Ü–∏–∏**:
  - S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
  - –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
  - –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
Morphik_local/Test/Morphik_local/
‚îú‚îÄ‚îÄ core/                       # Backend API (FastAPI)
‚îÇ   ‚îú‚îÄ‚îÄ api.py                 # –û—Å–Ω–æ–≤–Ω—ã–µ endpoints
‚îÇ   ‚îú‚îÄ‚îÄ database/              # –†–∞–±–æ—Ç–∞ —Å –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ embedding/             # –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ storage/               # S3/MinIO –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ services/              # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ
‚îú‚îÄ‚îÄ ee/                        # Enterprise Edition
‚îÇ   ‚îî‚îÄ‚îÄ ui-component/          # Frontend (Next.js)
‚îÇ       ‚îú‚îÄ‚îÄ components/        # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ       ‚îú‚îÄ‚îÄ pages/            # –°—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ       ‚îî‚îÄ‚îÄ public/           # –°—Ç–∞—Ç–∏–∫–∞
‚îÇ
‚îú‚îÄ‚îÄ worker/                    # –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏
‚îú‚îÄ‚îÄ auth-service/             # –°–µ—Ä–≤–∏—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îÇ
‚îú‚îÄ‚îÄ docker-compose.local.yml  # –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker
‚îú‚îÄ‚îÄ morphik.toml              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π
‚îú‚îÄ‚îÄ .env                      # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ storage/                  # –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
```

---

## üöÄ –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Docker Desktop
- Git
- 8GB RAM –º–∏–Ω–∏–º—É–º
- 20GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞

### –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

#### 1. –ü–µ—Ä–µ—Ö–æ–¥ –≤ —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
```bash
cd /Users/fedor/PycharmProjects/PythonProject/Morphik_local/Test/Morphik_local
```

#### 2. –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose -f docker-compose.local.yml down

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose -f docker-compose.local.yml up -d

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker ps
```

#### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- **UI**: http://localhost:3000
- **API Docs**: http://localhost:8000/docs
- **–ó–¥–æ—Ä–æ–≤—å–µ**: `curl http://localhost:8000/health`

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã
```bash
docker-compose -f docker-compose.local.yml down
```

---

## üîê –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º

### –õ–æ–∫–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
- **Frontend UI**: http://localhost:3000
- **API**: http://localhost:8000
- **API Docs**: http://localhost:8000/docs

### –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- **Username**: `demotest`
- **Password**: `demo`
- **Email**: `demotest@test.com`
- **User ID**: `8`

### –£–¥–∞–ª–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã (135.181.106.12)
- **PostgreSQL**: –ø–æ—Ä—Ç 5432 (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π)
- **Redis**: –ø–æ—Ä—Ç 6379 (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π)
- **Ollama**: –ø–æ—Ä—Ç 11434 (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π)
- **MinIO**: –ø–æ—Ä—Ç 32000

### Modal.com (ColPali)
- **Endpoint**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è
- **API Key**: –ù–∞—Å—Ç—Ä–æ–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **–§—É–Ω–∫—Ü–∏—è**: –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ PDF

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã

#### 1. `docker-compose.local.yml`
```yaml
services:
  morphik:
    build: .
    ports:
      - "8000:8000"
    environment:
      - POSTGRES_URI=postgresql+asyncpg://morphik:morphik@135.181.106.12:5432/morphik
      - REDIS_HOST=135.181.106.12
      - OLLAMA_BASE_URL=http://135.181.106.12:11434
      - AWS_ACCESS_KEY_ID=uvqsdyUADcc1Uygu298j
      - AWS_SECRET_ACCESS_KEY=3jwYrh9tIstk9EL8vmLMfnZwRqHdzssGfRR391or
      - AWS_ENDPOINT_URL=http://135.181.106.12:32000
```

#### 2. `morphik.toml`
```toml
[registered_models]
ollama_llama = { model_name = "ollama/llama3.2:3b", api_base = "http://135.181.106.12:11434" }
ollama_embedding = { model_name = "ollama/nomic-embed-text", api_base = "http://135.181.106.12:11434" }

[completion]
model = "ollama_llama"

[embedding]
model = "ollama_embedding"
```

#### 3. `.env`
```env
AWS_ACCESS_KEY_ID=uvqsdyUADcc1Uygu298j
AWS_SECRET_ACCESS_KEY=3jwYrh9tIstk9EL8vmLMfnZwRqHdzssGfRR391or
AWS_ENDPOINT_URL=http://135.181.106.12:32000
S3_BUCKET_NAME=morphik-storage
```

---

## üåê API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `POST /auth/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /auth/login` - –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
- `GET /auth/me` - –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

### –ú–æ–¥–µ–ª–∏
- `GET /v1/models` - –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
- `POST /v1/chat/completions` - –ß–∞—Ç —Å AI

### –î–æ–∫—É–º–µ–Ω—Ç—ã
- `POST /v1/ingest/files` - –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- `GET /v1/documents` - –°–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- `POST /v1/retrieve` - –ü–æ–∏—Å–∫ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º
- `DELETE /v1/documents/{id}` - –£–¥–∞–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞

### –ß–∞—Ç—ã
- `GET /v1/chats` - –ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–æ–≤
- `POST /v1/chats` - –°–æ–∑–¥–∞—Ç—å —á–∞—Ç
- `GET /v1/chats/{id}` - –ü–æ–ª—É—á–∏—Ç—å —á–∞—Ç

---

## ü§ñ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª—è–º–∏

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏
1. **Ollama –º–æ–¥–µ–ª–∏** (–≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω—ã):
   - `ollama/llama3.2:3b` - –æ—Å–Ω–æ–≤–Ω–∞—è –º–æ–¥–µ–ª—å
   - `ollama/nomic-embed-text` - –¥–ª—è –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

2. **–í–Ω–µ—à–Ω–∏–µ –º–æ–¥–µ–ª–∏** (—Ç—Ä–µ–±—É—é—Ç API –∫–ª—é—á–∏):
   - Claude (Anthropic)
   - GPT-4 (OpenAI)
   - Gemini (Google)

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
1. –û—Ç–∫—Ä–æ–π—Ç–µ Settings –≤ UI
2. –î–æ–±–∞–≤—å—Ç–µ API –∫–ª—é—á –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
3. –ú–æ–¥–µ–ª–∏ –ø–æ—è–≤—è—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ –≤—ã–±–æ—Ä–∞

---

## üîç –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### CORS –æ—à–∏–±–∫–∏
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ API –∑–∞–ø—É—â–µ–Ω
docker logs morphik_local-morphik-1
```

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞
nc -zv 135.181.106.12 5432  # PostgreSQL
nc -zv 135.181.106.12 6379  # Redis
nc -zv 135.181.106.12 11434 # Ollama
nc -zv 135.181.106.12 32000 # MinIO
```

### Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose -f docker-compose.local.yml logs

# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤
docker-compose -f docker-compose.local.yml build --no-cache
docker-compose -f docker-compose.local.yml up -d
```

### UI –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ API
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
docker exec morphik_local-ui-1 env | grep API_URL
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```bash
# API –ª–æ–≥–∏
docker logs -f morphik_local-morphik-1

# Worker –ª–æ–≥–∏
docker logs -f morphik_local-worker-1

# UI –ª–æ–≥–∏
docker logs -f morphik_local-ui-1
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
```bash
# CPU –∏ –ø–∞–º—è—Ç—å
docker stats

# –†–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–æ–≤
docker images | grep morphik
```

---

## üõ†Ô∏è –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### Docker
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
docker-compose -f docker-compose.local.yml restart morphik

# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker exec -it morphik_local-morphik-1 bash

# –û—á–∏—Å—Ç–∫–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
docker system prune -a
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
# API –∑–¥–æ—Ä–æ–≤—å–µ
curl http://localhost:8000/health

# –°–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π
curl http://localhost:8000/v1/models \
  -H "Authorization: Bearer YOUR_TOKEN"

# MinIO —Å—Ç–∞—Ç—É—Å
curl http://135.181.106.12:32000/minio/health/live
```

---

## üìù –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (v0.4.12)

### ‚úÖ –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è MinIO S3 —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ endpoint_url –¥–ª—è S3-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã—Ö —Ö—Ä–∞–Ω–∏–ª–∏—â
- ColPali —á–µ—Ä–µ–∑ Modal.com –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å AWS credentials

### üîß –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- –û—à–∏–±–∫–∏ 403 Forbidden –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–æ–≤
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å AWS_ACCESS_KEY vs AWS_ACCESS_KEY_ID
- –û—á–∏—Å—Ç–∫–∞ –±–∞–∑—ã –æ—Ç —Å—Ç–∞—Ä—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- UI —Ç–µ–ø–µ—Ä—å –≤ Docker (–Ω–µ npm dev)

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- **GitHub**: https://github.com/We-are-Humans-Corp/morphik_local_03
- **–û—Å–Ω–æ–≤–Ω–æ–π Changelog**: Test/Morphik_local/MORPHIK_CHANGELOG.md
- **–§–∞–π–ª –æ—á–∏—Å—Ç–∫–∏**: CLEANUP_PRIORITY.md

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 02.09.2025 | –í–µ—Ä—Å–∏—è: 0.4.12*