<!DOCTYPE html>
<html>
<head>
    <title>Check Auth</title>
    <style>
        body { 
            font-family: monospace; 
            padding: 20px; 
            background: #1a1a1a; 
            color: #0f0; 
        }
        button { 
            padding: 10px; 
            margin: 10px; 
            background: #333; 
            color: #0f0; 
            border: 1px solid #0f0; 
            cursor: pointer; 
        }
        button:hover { background: #444; }
        pre { 
            background: #111; 
            padding: 10px; 
            border: 1px solid #333; 
        }
    </style>
</head>
<body>
    <h1>Auth Data Check</h1>
    
    <h2>LocalStorage (Port 3000):</h2>
    <iframe id="frame3000" src="http://localhost:3000/debug" width="100%" height="300"></iframe>
    
    <h2>LocalStorage (Port 8080):</h2>
    <pre id="data8080"></pre>
    
    <h2>Current Data:</h2>
    <pre id="currentData"></pre>
    
    <button onclick="checkData()">Refresh Data</button>
    <button onclick="clearAll()">Clear All</button>
    
    <script>
        function checkData() {
            // Check current domain data
            const authToken = localStorage.getItem('authToken');
            const user = localStorage.getItem('user');
            const cookies = document.cookie;
            
            document.getElementById('currentData').textContent = JSON.stringify({
                domain: window.location.origin,
                authToken: authToken ? 'EXISTS' : 'NOT FOUND',
                user: user ? JSON.parse(user) : 'NOT FOUND',
                cookies: cookies || 'NO COOKIES'
            }, null, 2);
            
            // Check 8080 data
            document.getElementById('data8080').textContent = JSON.stringify({
                domain: 'http://localhost:8080',
                note: 'LocalStorage is domain-specific, data from :8080 cannot be read from :3000'
            }, null, 2);
        }
        
        function clearAll() {
            localStorage.clear();
            document.cookie.split(";").forEach(function(c) { 
                document.cookie = c.replace(/^ +/, "").replace(/=.*/, "=;expires=" + new Date().toUTCString() + ";path=/");
            });
            checkData();
        }
        
        checkData();
    </script>
</body>
</html>